# linux-ntlg
Linux command

### Основы
- bin - исполняемые файлы
- lib - библиотеки
- etc - конфигурационные файлы
- home - домашний каталог
- dev - представление устройств (нет на диске)
- proc - представление процессов (нет на диске)
- sys - представление системных параметров и состояний (нет на диске)
- tmp - временные файлы и директории (доступ есть у всех)
- usr - допольнительная иерархия
- var - различные изменяющиеся файлы (логи, кэш)
- opt - самостоятельные иерархии каталогов
- . - текущая директория (есть во всех директориях)
- .. - директория уровнем выше (есть во всех директориях)
- ~ - домашняя директория
- man команда - описание команды
- команда -h - описание команды
- echo "text" - вывести  текст в консоль
- cat file - выводиь содержимое файла
- head file - показать первые 10 строк файла
- tail file - показать последние 10 строк файла
- grep условие [цель] — вывести строки, содержащие условие
- less file - интерактивный просмотр текста
- hostnamectl - информация о системе (CentOS)
- Поток номер 0 (STDIN)
- Поток номер 1 (STDOUT)
- Поток номер 2 (STDERR)
- pwd -  вывести рабочую директорию
- cd путь - перейти в каталог
- mkdir dir -  создать каталог
- ls (-l -a -h) - просмотр содержимого каталога
- ln (-s - symlink) - hard link
- cp file/dir (to) file/dir (-R -v) - копирует источник в цель
- mv file/dir (to) file/dir (-v) - перемещает исходный файл в целевой
- rm file (-R -v) - удалить файл
- rmdir dir (-v) - удалить пустую директорию
- apt (update, upgrade, serch, install, remove, purge, autoremove)
- $PATH - путь содержит все директории, где интерпретатор командной строки ищет команды.
- dmesg - процесс загрузки системы
- .bashrc - настройки баш - можно дописать синоним

### Процессы
- ps aux (PID - идентификатор, TTY - устройство на котором запущен, STAT - статус, TIME - время CPU использованное процессом, COMMAND - команда запуска, START - время запуска)
- STAT (R — выполняется, D — uninterruptable sleep (ожидает ввод-вывод), S — interruptable sleep, I — idle (бездействует > 20 секунд), T — приостановлен, Z — зомби, W — выгружен на диск (swap file), < — имеет повышенный приоритет, N — имеет пониженный приоритет, L — страницы заблокированы в ядре, s — лидер сеанса (например, консоль))
- top
- pidstat (sudo apt install sysstat) - pidstat -p 1583(id) 1 - показывает через 1 секунду процесс
- /proc - cataloge with sys statistic, processes, kernel parametr 
- cat /proc/cpuinfo - информация о CPU
- cat /proc/version — версия Linux
- cat /proc/stat - cистемная статистика
- strace - нужен для отладки - отображает каждый системный вызов, выполненный процессом и каждый полученный сигнал - подключается по PID и показывает в реальном времени (если без параметров)
- strace echo 1 - системный вызов echo 1
- PID / PPID - уникальный идентификатор процесса / идентификатор родительского процесса
- UID / EUID - дентификатор пользователя, создавшего данный процесс / текущий идентификатор пользователя процесса
- nice (-20 ... 19) - число, показывающее, какая часть процессорного времени может быть выделена (ядром) для процесса. Т.е. это пользовательский приоритет, который отличается от приоритета планировщика. По умолчанию, наследуется от родительского процесса
- nice - sudo nice -n 13 nano
- [command] & - фоновый процесс (отображается но не блокирует консоль) - pidstat -p 1 -t 1 &
- fg - возвращает фоновый процесс в нормельное состояние, после чего его можно завершить
- renice - sudo renice 5 13111
- ls > file - вывод в новый файл
- ls >> file - дополнение к существующему файлу
- ls 1>file 2>error - запись потоков вывода и ошибок в разные файлы
- ls 1>file 2>&1 > запись потоков вывода и ошибок в один и тот же файл
- | - pipe - ps aux | grep root
- Сигнал (signal) — уведомление процесса о каком-либо событии
- kill -l - набор сигналов
- dd - копировать побайтово
- dd if=/dev/urandom of=/dev/null bs=100M count=5  - bs - размер куска, count - сколько раз
- pgrep - грепаем id процесса можно регуляркой - pgrep "^dd$"
- kill (-10) -SIGUSR1 3830239(PID) - вернят прогресс по процессу
- kill (-2) -SIGINT 3830239(PID) - запрос на завершение текущей операции (CTRL-C)
- kill -9 (-KILL) PID - завершает процесс на уровне ядра. Не блокируется
- kill -15 (-TERM) PID - запрос на завершение программы
- sudo kill -pid- / sudo killall nano / sudo pkill -u user1
- Потоки (нити, threads) — программно выделенные части одного процесса, использующие его ресурсы совместно
- ps m - просмотр потоков
- ps -eLf - просмотр потоков

### Память
- RAM (Random Access Memory, память с произвольным доступом) или ОЗУ (Оперативное Запоминающее Устройство) — энергозависимая память с произвольным доступом к ячейкам
- RAM, ОЗУ — энергозависимое запоминающее устройство, в котором во время работы компьютера хранится исполняемый код и входные/выходные данные.
- ROM (Read Only Memory, память только для чтения) или ПЗУ (постоянное запоминающее устройство) — энергонезависимая память для хранения массива неизменяемых данных
- SRAM (Static RAM) — cтатическая память с произвольным доступом
- DRAM (Dynamic RAM) — динамическая память с произвольным доступом
- UMA (Uniform Memory Access, равномерный доступ к памяти): все процессоры имеют доступ к совместно используемой памяти через общую шину;
- NUMA (Non-Uniform Memory Access, неравномерный доступ к памяти): для каждого процессора существует отдельный локальный модуль памяти, к которому он может обращаться напрямую.
- lscpu - позволяет отобразить информация о процессоре
- dmidecode -t memory / dmidecode -t baseboard - позволяет получить информацию о комплектующих ПК
- cat /proc/meminfo - позволяет в режиме чтения узнать большинство текущих настроек операционной системы (x86)
- Виртуальная память - Абстракция, которая позволяет выполнять программы, требующие больше оперативной памяти, чем имеется в компьютере, путём автоматического перемещения частей программы между основной памятью и другими хранилищами.
- Организация виртуальной памяти
- Страничная — адресное пространство делится на части одинакового фиксированного размера, называемые виртуальными страницами. Адрес задается номером страницы в виртуальной памяти и смещением внутри страницы
- Сегментная — адресное пространство делится на части, называемые сегментами, размер которых определяется смысловым значением содержащейся в них информации. Виртуальный адрес задается номером сегмента и смещением внутри сегмента
- top - отображает потребление ресурсов процессами в реальном времени (и другую информацию)
- htop - та же утилита с псевдографическим интерфейсом
- free -h - утилита для отображения состояния памяти
- cat /proc/meminfo - раздел файловой системы /proc с текущей информацией о состоянии памяти в операционной системе.
- Cache — промежуточный буфер с быстрым доступом для хранения информации, которая с большой вероятностью будет запрошена.
- TLB — это специальный кэш, который хранит соответствие страниц в виртуальной и физической памяти, которые с наибольшей вероятностью будут запрошена.
- MMU — компонент аппаратного обеспечения компьютера,отвечающий за управление доступом к памят
- Кэш-память — сверхбыстрая память используемая процессором, для временного хранения данных, которые наиболее часто используются.
- sysctl -a | grep dirty - найти в настройках Linux параметры, которые используются при кэшировании (“грязные” страницы).
- sync - команда заставляет Linux записать все кэшированные данные на диск
- echo 2 > /proc/sys/vm/drop_caches — очистка inode и dentrie
- swapon -s; grep Swap /proc/meminfo; free -h - команды показывают использование файла подкачки
- mkswap /swapfile - размечает файл /swapfile как файловую систему swap
- swapoff\swapon /swapfile - отключение/подключение файла подкачки в систему
- cat /etc/fstab - выводит список устройств для монтирования. Можно приписать swap раздел
- /proc/sys/vm/vfs_cache_pressure — размер дискового кэша
- /proc/sys/vm/swappiness — процент переноса данных в swap

### Планировщик задач
- Планировщик (шедулер, англ. scheduler) — часть операционной системы, ответственная за распределение ресурсов компьютера между рабочими юнитами (процессами, потоками, пользователями и т. д.)
- невозможно узнать, когда завершится программа;
- программа может зависнут, а процессор не знает о времени;
- используем аппаратные прерывания.
Программно невозможно понять, что прошло какое-то время. Остаётся использовать аппаратные прерывания. Используем аппаратные прерывания от контроллера прерываний периферии, в частности — timer.
- Многозадачность
- нужно делить время работы на процессоре (Процент времени процесса = Приоритет ÷ Сумма приоритетов)
- как справедливо поделить время на процессоре? (Чтобы никто не забирал больше, чем надо, но получал достаточно.)
- сама система распределения не должна быть дорогой
- Кооперативная многозадачность - Процессы сами по доброй воле (вызовом специальной команды) отдают управление (простота, скорость, низкая отзывчивость, зависания)
- Вытесняющая многозадачность - Планировщик (по таймеру) останавливает текущий процесс и передаёт управление другому (прогнозируемая отзывчивость, независимость процессов, схожая скорость число-дробилок, дороже)
- С помощью утилиты taskset можно задавать, на каких процессорах
будет исполняться программа или менять по PID
```
$ time taskset 1 ./a.out
real 0m1,372s - реальное время
user 0m1,368s - сумма времени с каждого процессора (тут 1)
sys 0m0,005s - системное время
$ time ./a.out
real 0m5,007s - реальное
user 0m39,886s - все процессоры (теряемя время на записи кэша в RAM)
sys 0m0,004s
```
- vmstat 5 1 - предоставляет краткую информацию о различных ресурсах системы и связанных с ними неполадках, приводящих к снижению производительности
- Procs
r: количество запущенных процессов (работающих или ожидающих выполнения).
b: количество спящих процессов.
- Memory
swpd: объем используемой виртуальной памяти.
free: объем свободной памяти.
buff: количество памяти, используемой в качестве буферов.
cache: объем памяти, используемой в качестве кеша.
inact: количество неактивной памяти (опция -a).
active: количество активной памяти. (опция -a)
- Swap
si: объем памяти, выгруженный с диска (/s).
so: объем памяти, перенесенный на диск (/s).
- IO
bi: блоки, полученные от блочного устройства (blocks/s).
bo: блоки, отправленные на блочное устройство (blocks/s).
- System
in: количество прерываний в секунду, включая часы.
cs: количество переключений контекста в секунду.
- CPU
Здесь проценты от общего времени процессора.
us: время, потраченное на запуск кода, не относящегося к ядру (время пользователя).
sy: время, потраченное на выполнение кода ядра (системное время).
id: время бездействия. До версии Linux 2.5.41 это включает время ожидания ввода-вывода.
wa: время, проведенное в ожидании ввода/вывода. До Linux 2.5.41, включено в idle.
st: время, украденное из виртуальной машины. До Linux 2.6.11 неизвестно.
- nice -n {приоритет} {программа} {аргументы}
- sudo nice -n — если приоритет меньше 0
- renice -n {приоритет} PID — для уже запущенного процесса
- renice -n -g -u — для запущенной группы процессов, для пользователя
- ps ax -o pid,ni,cmd — чтобы посмотреть nice запущенных процессов
- CFS планировщик
- храним не процессы, а sched_entity — планировщик может рассчитывать время, например, для пользователей;
- все sched_entity лежат в бинарном сбалансированном дереве, отсортированном по оставшемуся времени исполнения и имеет сложность O(logN);
- CFS планировщик более справедлив — при равном приоритете задачи будут получать более равные кванты, чем в O(1);
- Работает сразу на все процессоры — нет проблемы с локальными spinlock-ами.

### Дисковые системы
- SCSI (Small Computer System Interface) – это интерфейс, предназначенный для объединения на одной шине устройств различных классов: жестких дисков, CD-ROM, приводов CD, DVD, стримеров, сканеров, принтеров и т. д.
- PATA (Parallel Advanced Technology Attachment) или IDE (Integrated Drive Electronics) – параллельный интерфейс подключения накопителей (гибких дисков, жёстких дисков и оптических дисководов) к компьютеру
- SATA (Serial ATA) – последовательный интерфейс обмена данными с накопителями информации. SATA является развитием параллельного интерфейса ATA (IDE)
- Serial Attached SCSI (SAS) – последовательный компьютерный интерфейс, разработанный для подключения различных устройств хранения данных, например, жёстких дисков и ленточных накопителей. SAS разработан для замены параллельного интерфейса SCSI и основывается во многом на терминологии и наборах команд SCSI. SAS обратно совместим с интерфейсом SATA: устройства 3 Гбит/с и 6 Гбит/с SATA могут быть подключены к контроллеру SAS, но не наоборот
- Peripheral Component Interconnect Express (PCI Express, PCIe) — последовательный высокопроизводительный интерфейс для передачи данных. Имеет несколько видов разъемов для подключения различного оборудования, в том числе разъем M2 для подключения запоминающих устройств
- Fibre channel (волоконный канал) — семейство протоколов для высокоскоростной передачи данных.
- Fibre Channel Protocol (FCP) — транспортный протокол (как TCP в IP- сетях), инкапсулирующий протокол SCSI по сетям Fibre Channel. Является основой построения сетей хранения данных.
- DAS – блочное устройство с диска, который физически, напрямую, подключен к хост-машине. Необходимо поместить на нее файловую систему, прежде чем ее можно будет использовать. Технологии для этого включают IDE, SCSI, SATA и т.д.
- SAN – блочное устройство, которое доставляется по сети. Как и DAS, вы все равно должны разместить на нем файловую систему, прежде чем она сможет использоваться. Технологии для этого включают FibreChannel, iSCSI, FoE и т. Д.
- NAS – файловая система, доставляемая по сети. Технологии для этого включают NFS, CIFS, AFS и т.д.
- СХД (сеть хранения данных, SAN, storage area network) – архитектурное решение для подключения внешних устройств хранения данных (дисковые массивы, ленточные библиотеки) к серверам таким образом, чтобы операционная система распознала подключённые ресурсы как локальные
- cat /proc/devices - отображает список устройств, опознанных ядром
- ls -la /dev - каталог специального назначения, который содержит файлы устройств
- lsblk - list block devices
- lshw -short -C disk, hdparm -I /dev/sda, smartctl --all /dev/nvme0 - утилиты, которые отображают информацию об имеющихся дисках с точки зрения железа
- stat /dev/sda - информация о устройстве
- Виртуальная файловая система (англ. virtual file system — VFS) - это абстрактный уровень поверх конкретной реализации файловой системы. Она используется для доступа к локальным файловым системам(ФС) (fat32, ext4, ntfs), сетевым ФС(nfs), а также к устройствам, не предназначенным для хранения данных (procfs). VFS предоставляет единообразный доступ клиентских приложений к различным типам файловых систем. VFS декларирует программный интерфейс между ядром и конкретной файловой системой, таким образом, для добавления поддержки новой файловой системы не требуется вносить изменений в ядро операционной системы
- Device mapper - Подсистема ядра Linux, которая позволяет мэппить одно блочное устройство на другое или несколько других. Это позволяет реализовать объединение нескольких реальных устройств в одно виртуальное, создавать snapshot’ы, организовывать балансировку между устройствами, делать шифрованные тома и т.д. Через device-mapper, в качестве низкоуровнего API, работают LVM, cryptsetup, dm-multipath и другие утилиты
- dmsetup ls - отображает список устройств, созданных с помощью device mapper
- /dev/mapper/vgdata-lvdata – ссылки на устройства, созданные device mapper
- dev/dm-0, /dev/dm-1 – устройства которые создаются device mapper
- Раздел — часть долговременной памяти жёсткого диска или флеш- накопителя, выделенная для удобства работы, и состоящая из смежных блоков. На одном устройстве хранения может быть несколько разделов
- Использование разделов дает возможность:
- хранить информацию в разных файловых системах, или в одинаковых файловых системах, но с разным размером кластера;
- на одном жёстком диске можно установить несколько операционных систем
- MBR (Master Boot Record, главная загрузочная запись) содержит сведения о структуре жесткого диска и код для запуска операционной системы
- GUID (Globally Unique Identifier) Partition Table (GPT) — стандарт формата размещения таблиц разделов на физическом жестком диске. Является частью расширяемого микропрограммного интерфейса, Extensible Firmware Interface, EFI.
- lsblk – утилита выводит список блочных устройств с информацией о них
- blkid – утилита отображает информацию об уникальных идентификаторах блочных устройств
- fdisk – утилита позволяет управлять разделами с разметкой MBR
- fdisk /dev/sdb  | o - DOS, g - gpt,  n - add partition, d - delete
- gdisk – утилита позволяет управлять разделами с разметкой GPT
- parted – утилита позволяет управлять разделами с разметкой MBR и GPT. В отличие от gdisk и fdisk изменения применяются сразу, не требуя подтверждения
- cat /proc/partitions – вывести список разделов
- RAID (Redundant Array of Independent Disks, избыточный массив независимых дисков) — технология виртуализации данных, которая объединяет несколько дисков в логический элемент для повышения производительности и отказоустойчивости
- RAID 0 (striping, чередование) — дисковый массив из двух или более жёстких дисков без резервирования. Информация разбивается на одинаковые по длине блоки, а затем записывается поочерёдно на каждый диск в структуре. Основное предназначение такой системы — увеличение производительности, при этом вам будет доступен полный объем всех дисков. Если один диск выходит из строя, все данные становятся недоступными
- RAID 1 (mirroring, зеркалирование) — массив из двух или более дисков, являющихся полными копиями друг друга. Обеспечивается бесперебойность работы, даже если один из дисков выйдет из строя. Производительность остается на прежнем уровне, объем равен меньшему из дисков в массиве
- RAID 5 - Данные записываются на все диски в томе и в блок четности
для каждого блока данных. Если один физический диск выходит из строя, данные из неисправного диска можно восстановить на запасной диск. Данные сохраняются при выходе из строя одного диска, но в случае выхода из строя второго диска до того, как данные смогли быть восстановлены на запасной диск, все данные будут утеряны. Для создания тома RAID 5 требуется минимум три диска
- RAID 10 - В режиме RAID 10 сочетаются защита режима RAID 1 и
производительность режима RAID 0. При использовании четырех дисков в режиме RAID 10 создается два сегмента RAID 1, которые объединяются в страйп RAID 0. При использовании восьми дисков в страйпе RAID 0 будет уже четыре сегмента RAID 1. В режиме RAID 10 могут выйти из строя до 2х дисков в двух сегментах RAID 1
```
sudo yum (apt-get) install mdadm — установка утилиты
sudo mdadm --create /dev/md0 -l 1 -n 2 /dev/sd{b,c} — создание
нового массива
```
- cat /proc/mdstat - текущее состояние
- /etc/mdadm.conf - файл конфигурации
- LVM - (Logical Volume Manager, Менеджер логических томов) — это дополнительный слой абстракции между «железом» и файловой системой, позволяющий использовать разные области одного жёсткого диска и/или области с разных жёстких дисков как один логический том
- Преимущества LVM
- легко изменять размер логических томов,
- можно объединять несколько физических устройств в один логический пул,
- возможное количество логических томов намного превышает возможности традиционного деления диска на разделы,
- с помощью снэпшотов можно делать бэкапы логических томов.
- pvcreate, vgcreate, lvcreate - create volume, volume group, logic volume
- pvs, vgs, lvs - show volume, volume group, logic volume
- top — выводит информацию о работающих в системе процессах и информацию о них
- iostat - мониторинг использования дисковых разделов
- iotop - аналогична утилите top, но вместо использования процесами CPU и памяти показывает работу процессов с дисками
- vmstat 5 5 - утилита отображает информацию об использовании CPU, памяти, дисков
- sar -p -d 5 3 - утилита для отображения различных параметров
(статистики) работы системы

### Файловые системы
- Часть операционной системы,которая устанавливает физическую и логическую структуру файлов на разделе или диске, управляет созданием и изменением файлов и сопутствующих данных. В Linux на каждый раздел можно установить свою ФС, которая отвечает за порядок и способ организации информации.
- Функции файловых систем - размещение и упорядочивание на носителе данных в виде файлов; - создание, чтение и удаление файлов; - назначение и изменение атрибутов файлов; - защита файлов при системном сбое; - защита файлов от несанкционированного доступа; - поиск файлов
- cat /proc/filesystems - вывести список файловых систем,
которые поддерживаются ядром
- fsck - утилита, с помощью которой можно проверить ФС на ошибки
- file -s /dev/sda1 - выводит тип файловой системы
- df -T - выводит тип файловой системы
- Журналирование
- Журналирование в том или ином виде применяется практически во всех современных файловых системах. При использовании журналирования файл сначала записывается в журнал («лог»). После этого файл записывается на жесткий диск, а потом удаляется из журнала, после чего операция записи считается завершённой. Если во время записи выключилось питание, то после включения системы файловая система может проверить журнал и найти незавершённые операции.
- Extent - В традиционных файловых системах заголовки(inode) указывают на отдельные блоки . В файловых системах с поддержкой экстентов используются указатели не на блоки, а на экстенты - непрерывные области носителя информации.
- COW(Copy-On-Write - копирование при записи) - механизм для оптимизации различных процессов в операционных системах. Идея подхода copy-on-write заключается в том, что при чтении области данных используется общая копия, в случае изменения данных — создается новая копия.
- FAT (File Allocation Table, таблица размещения файлов) – файловая система, которая использовалась в операционной системе DOS. В файловой системе FAT дисковое пространство логического
раздела делится на три области: зарезервированная, системная и область данных
- Команды для создания FAT
```
apt install dosfstools
fdisk /dev/sd*
mkfs.vfat -F 32 -n MyDrive /dev/sd*
fatresize -s /dev/sd*
```
- NTFS (new technology file system, «файловая система новой технологии») — стандартная файловая система для семейства операционных систем Windows NT.
- - apt install ntfs-3g
- - mount -t ntfs-3g /dev/sdb1 /mnt - mount ntfs
- Ext4 — является развитием Ext2 и Ext3. Самая популярная, “файловая система по умолчанию” в Linux. В отличие от Ext3 введен механизм пространственной (extent) записи файлов, уменьшающего фрагментацию и повышающего производительность.
- - mkfs -t ext4 /dev/hdb1 - создания ext4 на разделе /dev/hdb1
- XFS - высокопроизводительная 64-битная журналируемая файловая система.
- - mkfs.xfs /dev/sda1 - содание файловой системы
- - xfs_growfs / -d - увеличивает файловую систему на все доступное пространство
- - xfs_info /dev/sda1 -  - выводит информацию про метаданные файловой системы
- - xfs_check /dev/sdb1, xfs_repair /dev/sdb1 -  - проверяет файловую
систему на ошибки
- Btrfs - (B-tree FS) — файловая система для Linux, основанная на структурах B-деревьев и работающая по принципу «копирование при записи» (copy-on-write)
- - mkfs.btrfs /dev/sdc -L single_drive - создание ФС на одном диске
- - mkfs.btrfs /dev/sdc /dev/sdd -L double_drive - оздание ФС на двух дисках
- - sudo mkfs.btrfs /dev/sdc /dev/sdd -d raid1 -m raid1 -L raid1_drive - создать рейд средствами btrfs
- - btrfs filesystem df / - получить информацию о ФС
- - btrfs filesystem resize -2g /mnt - изменить размер тома в реальном времени
- NFS (Network File System, сетевая файловая система) — протокол сетевого доступа к файловым системам. Позволяет пользователям подключать удаленные сетевые каталоги к своей системе и передавать файлы между серверами.
- /etc/fstab - конфигурационный файл, содержащий инструкции по монтированию блочных устройств, NFS-ресурсов и псевдо-файловых систем в пространство файловых имен и областей подкачки страниц - что монтируем (UUID) куда монтируем (path) тип(ext4) опции(defaults) индикатор необходимости делать резервную копию(0) порядок проверки раздела(1)
- mount - a - проверка корректности /etc/fstab
- Автоматическое монтирование autofs - Может быть реализовано с помощью пакета autofs и позволяет автоматически подключать различные ресурсы (сетевые устройства, жесткие диски) в начале их использования и отключать при прекращении использования
- apt-get install autofs – установка пакета
- man auto.master –получение справки по пакету
- systemctl list-units -t mount --all - вывести состояние всех описаных в systemd точек монтирования
- systemctl edit --full boot.mount - открыть на редактирование unit- файл
- mount - show all mounted
-  - mount -t ext4 -o noexec /dev/sdb6 /mnt
-  - mount --uuid="b386d319-05c2-42c8-8364-8d37280b69e0" /mnt
-  - mount --label="home" /mnt/
-  - umount /mnt
-  stat file - info about file
- df -i
- ls -i
- file -s /dev/sda3

### Ядро
- /lib/modules/
- lsmod - info about all modules
- insmod - /lib/modules/modulename.ko - load with insmod
- modprobe module-name - load module
- modinfo module-name - info about module
- rmmod module-name
- strace command
- DKMS (Dynamic Kernel Module Support) - add my module to kernel
- - dkms add -m module-name
- - dkms status
- - dkms build -m module-name -v module-version
- - dkms install -m module-name -v module-version
- - dkms autoinstall
- /etc/modules - ubuntu file for modules


### Загрузка
- /boot/grub/grub.cfg — Debian, Ubuntu
- /boot/grub2/grub.cfg — Red Hat, CentOS
- update-grub/grub2-mkconfig
- sudo nano /etc/default/grub - for change
- sudo update-grub
- shutdown -r now
- cat /proc/cmdline - shov info about system
- sysctl -a - kerner param
- cat /etc/sysctl.conf | more - config file
- cat /etc/sysctl.conf | grep ipv4 - ipv4
- sudo sysctl net.ipv4.ip_forward=1 - make gateway
- /sbin/init - process/daemon manage all
- systemd - modern process manage all
- systemctl get-default
- systemd module
- - /usr/lib/systemd/system/ – модули из пакетов (Nginx, Apache,MySQL)
- - /run/systemd/system/ — модули, созданные во время работы ОС
- - /etc/systemd/system/ — модули, созданные пользователем
- systemd-analyze plot > test.svg
- sudo systemctl list-dependencies
- systemctl list-units — список модулей
- systemctl list-units --type=service — список модулей-служб
- systemctl status module — состояние выбранного модуля
- systemctl enable\disable module — разрешить/запретить модуль
- systemctl start\stop\restart module — запустить/остановить/модуль
- systemctl daemon-reload — перезапуск конфигурации systemd
- journalctl
- nano /etc/systemd/journald.conf
- journalctl --since=yesterday --until=now

### Управление пакетами
- apt install
- apt update
- apt upgrade
- apt search -pattern-
- apt show -packet_name-
- apt list -
--installed
--upgradeable
--all-versions
- apt remove <packet_name>
- apt purge <packet_name> 
- apt reinstall <packet_name>
- apt autoremove 
- apt -f install 
- yum update
- yum update <packet_name>
- yum downgrade <packet_name>
- yum search <pattern>
- yum list
 -- installed
 -- available 
 -- all 
 - yum install <packet_name>
 - yum remove <packet_name>
 - yum reinstall <packet_name>
 - yum autoremove
 - yum clean packages
 
